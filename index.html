<!doctype html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>hello phaser!</title>
    <script src="//cdn.jsdelivr.net/phaser/2.5.0/phaser.min.js"></script>
</head>

<body>

    <script type="text/javascript">

        window.onload = function () {


            var game = new Phaser.Game(800, 600, Phaser.AUTO, 'phaser-example', { preload: preload, create: create, update: update, render: render });

            function preload() {

                game.load.tilemap('map', 'assets/tilemaps/csv/catastrophi_level2.csv?123', null, Phaser.Tilemap.CSV);
                game.load.image('tiles', 'assets/tilemaps/tiles/catastrophi_tiles_16.png');
                game.load.image('player','assets/sprites/hero.png');
            }

            var map;
            var layer;
            var cursors;
            var player;
            var debug;

            function createPlayer() {
            }

            function create() {
                //  Because we're loading CSV map data we have to specify the tile size here or we can't render it
                map = game.add.tilemap('map', 16, 16);
                //  Now add in the tileset
                map.addTilesetImage('tiles');

                //  Create our layer
                layer = map.createLayer(0);
                layer.scale.set(1.25);

                //  Resize the world
                layer.resizeWorld();

                //  Allow cursors to scroll around the map
                cursors = game.input.keyboard.createCursorKeys();
                player = game.add.sprite(50, 50, 'player')
                player.scale.setTo(0.1,0.1);
                game.physics.startSystem(Phaser.Physics.P2JS);
                game.physics.p2.enable(player);

                debug = game.add.text(16, 16, 'Hello world', { font: '14px Arial', fill: '#ffffff' });
                debug.fixedToCamera = true;
            }

            function update() {

                player.body.setZeroVelocity();
            }

            function render() {

            }

            function updateDebug(){
                debug.text = Math.round(player.position.x, 1) + ", " + Math.round(player.position.y, 1);
            }

            function getInput(){
                if (cursors.up.isDown)
                {
                    player.body.moveUp(300)
                }
                else if (cursors.down.isDown)
                {
                    player.body.moveDown(300);
                }
            
                if (cursors.left.isDown)
                {
                    player.body.velocity.x = -300;
                }
                else if (cursors.right.isDown)
                {
                    player.body.moveRight(300);
                }
            }
        };

    </script>

</body>

</html>